@if ((shoppingCart$ | async)?.items?.length === 0) {
  <h2 class="empty-cart">Your cart is empty !</h2>
} @else {
  @for (item of (shoppingCart$ | async)?.items; track item.card.id) {
    <div class="item-container">
      <div class="flex-container list-item">
        <app-card-list-item
          [card]="item.card"
          [displayLowestPrice]="false"
          [isLoading$]="isLoading$"
        ></app-card-list-item>
        @for (foil of getItemFoils(item.foilCount); track foil) {
          <div class="price-details-container">
            {{ item.card.name }} {{ foil }} x {{ item.foilCount.get(foil) }} at
            {{ item.card.tcgplayer.prices[foil]!.low }} for a total of {{ countItemTotalPrice(item, foil) }} $
            <div class="btn-container">
              <button mat-raised-button color="primary" (click)="add(item.card, foil)">
                <mat-icon aria-hidden="false" class="cart-icon">add_shopping_cart</mat-icon>
              </button>
              <button mat-raised-button color="warn" (click)="remove(item.card, foil)">
                <mat-icon aria-hidden="false" class="cart-icon">remove_shopping_cart</mat-icon>
              </button>
            </div>
          </div>
        }
      </div>
      <div class="total-item">Total : {{ countItemTotalPrice(item) }} $</div>
    </div>
    <mat-divider class="item-divider"></mat-divider>
  }
  <div class="total-container">
    <mat-divider></mat-divider>
    <div class="total">Total cart : {{ shoppingCartTotalPrice$ | async }} $</div>
  </div>
}
